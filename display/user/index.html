<!DOCTYPE html>
<title>用户消息</title>

<head>
    <meta charset="UTF-8">
    <style>
        .box {
            width: 1000px;
            height: 250px;
            border: 2px solid black;
            padding: 10px;
            margin: 0 auto;
        }
    </style>
    <div style="text-align: center;">
        <h1>尊敬的用户：</h1>
    </div>
</head>

<body>



    <div class="container">
        <div class="row">
            <div class="col">
                <!-- hh -->
                <div class="card shadow-sm">
                    <svg class="bd-placeholder-img card-img-top" width="100%" height="225"
                        xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail"
                        preserveAspectRatio="xMidYMid slice" focusable="false">
                        <title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef"
                            dy=".3em">Thumbnail</text>
                    </svg>
                    <div class="card-body">
                        <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                            additional
                            content. This content is a little bit longer.</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                            </div>
                            <small class="text-body-secondary">9 mins</small>
                        </div>
                    </div>
                </div>



                <!-- hh -->
            </div>


            <div class="col">
                <!-- hh -->
                <div class="card shadow-sm">
                    <svg class="bd-placeholder-img card-img-top" width="100%" height="225"
                        xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail"
                        preserveAspectRatio="xMidYMid slice" focusable="false">
                        <title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c"></rect><text x="50%" y="50%" fill="#eceeef"
                            dy=".3em">Thumbnail</text>
                    </svg>
                    <div class="card-body">
                        <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                            additional
                            content. This content is a little bit longer.</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="btn-group">
                                <button type="button" class="btn btn-sm btn-outline-secondary">View</button>
                                <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                            </div>
                            <small class="text-body-secondary">9 mins</small>
                        </div>
                    </div>
                </div>



                <!-- hh -->
            </div>


        </div>
    </div>





    <!-- <div class="box">
        <h3>发送给服务端的信息是：</h2>
         <p><div id="msg"></div></p>
    </div> -->

    <div id="bpm_chart" style="height: 400px; top: 100px; left: 100px; width: 50%;"></div>

    <div class="box" , id="loc">
        <h3>目前您位于：</h2>
            <p>
            <div id="loc"></div>
            </p>
    </div>
    <div class="container-md">
        <div class="box">
            <h3>根据您实时上传的数据，可以得出如下结论：</h2>

                <p>您目前的危险等级是：
                <div id="level"></div>
                </p>
                <p>
                <div id="conclusions"></div>
                </p>
        </div>
    </div>

    <div class="box">
        <h3>建议您：</h2>
            <p>
            <div id="advice"></div>
            </p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>

    <script src="main.js"></script>

    <script src="flow_chart.js"></script>

    <!-- <script>

        var frequency = 5;
        display(frequency, Math.floor(Math.random() * 21) + 90);
        // set display frequency and data
        setInterval(function () {
            display(frequency, Math.floor(Math.random() * 21) + 90);
        }, 1000 * frequency);

    </script> -->

    <script>
        let frequency = 5;
        display(frequency, Math.floor(Math.random() * 21) + 90);

        socket.onmessage = function (event) {
            // alert("recv data from server");
            // alert(event.data);
            let data = JSON.parse(event.data);
            // alert(data);
            document.getElementById("loc").innerText = data['location'];
            // document.getElementById("msg").innerText = data['msg']
            document.getElementById("level").innerText = data['level']

            let conclusionsItem = document.getElementById("conclusions");
            conclusionsItem.innerHTML = "";
            conclusionsItem.innerText = data['text'];
            // let listItem1 = document.createElement('li');
            // listItem1.textContent = data['text'];
            // conclusionsItem.appendChild(listItem1);
            // for (let i = 0; i < data['text'].length; i++) {
            //     let listItem = document.createElement('li');
            //     listItem.textContent = data['text'][i];
            //     conclusionsItem.appendChild(listItem);
            // }

            let adviceItem = document.getElementById("advice");
            adviceItem.innerHTML = "";
            let listItem = document.createElement('li');
            listItem.textContent = data['advice'];
            adviceItem.appendChild(listItem);

            let frequency = 5;
            display(frequency, data['data']['bpm']);


            // for (let i = 0; i < data['advice'].length; i++) {
            //     let listItem = document.createElement('li');
            //     listItem.textContent = data['advice'][i];
            //     adviceItem.appendChild(listItem);
            // }
        };

    </script>




</body>

</html>